(this.webpackJsonpstub=this.webpackJsonpstub||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/basePhoto.d86631c8.jpg"},119:function(e,t,a){e.exports=a(257)},257:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchUser",(function(){return k})),a.d(n,"submitRecipe",(function(){return _})),a.d(n,"fetchRecipe",(function(){return R})),a.d(n,"deliteRecipe",(function(){return x})),a.d(n,"fetchOneRecipe",(function(){return C}));a(120);var r=a(0),c=a.n(r),l=a(20),o=a.n(l),i=a(9),s=a(6),u=a(115),p=a(23),m=a(24),d=a(27),f=a(26),h=a(13),b=a(7),v=a(58),g=a(17),y=a.n(g),E=a(36),O=a(21),j=a.n(O),w=a(59),k=function(){return function(){var e=Object(E.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/current_user");case 2:a=e.sent,t({type:"fetch_user",payload:a.data||null});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(e,t){return function(){var a=Object(E.a)(y.a.mark((function a(n){var r,c,l,o,i,s;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),{headers:{"content-type":"application/json"}},(r=new FormData).append("api_key",w.SECRET),r.append("file",e.picture),r.append("upload_preset","images_recipe"),r.append("api_key",w.SECRET),console.log(Object(v.a)(r)),c={},r.forEach((function(e,t){c[t]=e})),console.log(c),a.prev=11,a.next=14,j.a.post("http://api.cloudinary.com/v1_1/".concat(w.USER,"/image/upload/"),r,{headers:{"X-Requested-With":"XMLHttpRequest"}});case 14:return l=a.sent,console.log("hey responseeeee",l),(o=new FormData).append(Object.keys(e)[0],e.name),o.append(Object.keys(e)[1],e.ingredients),o.append(Object.keys(e)[2],e.listOfStages),o.append(Object.keys(e)[3],e.time),o.append(Object.keys(e)[4],e.difficulty.value),o.append(Object.keys(e)[5],l.data.secure_url),i={},o.forEach((function(e,t){i[t]=e})),JSON.stringify(i),a.next=28,j.a.post("/api/recipes",i);case 28:s=a.sent,console.log(s),n({type:"add_one_recipe",payload:s.data}),t.push("/"),a.next=39;break;case 34:a.prev=34,a.t0=a.catch(11),console.log(a.t0.response),console.log(a.t0.response.data),a.t0.response.data&&n({type:"registration_error",payload:a.t0.response});case 39:case"end":return a.stop()}}),a,null,[[11,34]])})));return function(e){return a.apply(this,arguments)}}()},R=function(){return function(){var e=Object(E.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/all_recipes");case 2:a=e.sent,t({type:"fetch_all_recipes",payload:a.data||null});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(e,t){return function(){var a=Object(E.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,j.a.delete("/api/delete_recipes/".concat(e));case 3:r=a.sent,console.log("ooooooooooooo",r.data._id),n({type:"delete_recipe",payload:r.data._id}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(E.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("/api/fetch_one_recipe/".concat(e));case 3:n=t.sent,console.log("fullRecipe infoooooo",n.data._id),a({type:"fetch_one_recipe",payload:n.data._id}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},N=a(81),S=a(116),I=a.n(S),F=function(e){return console.log(e),c.a.createElement("div",{className:"card "},c.a.createElement("div",{style:e.image?{backgroundImage:"url(".concat(e.image,")"),height:"200px",backgroundSize:"cover"}:{backgroundImage:"url(".concat(I.a,")"),height:"200px",backgroundSize:"cover"},className:"card-image "},e.owner==e.auth?c.a.createElement("button",{onClick:e.clicked,className:"btn-floating halfway-fab waves-effect waves-light btn-large lime darken-2"},c.a.createElement("i",{className:"material-icons"},"clear")):null),c.a.createElement("span",{className:"card-title"},e.name),c.a.createElement(h.b,{to:e._id},c.a.createElement("div",{className:"card-content"},e.listOfIngredients[0]," ",e.listOfIngredients[1])))};var T={fetchAllRecipe:R,deleteOneRecipe:x},B=Object(i.b)((function(e){var t=e.allRecipies,a=e.auth;return console.log("hiuuhuuhu",t,a),{allRecipies:t,auth:a}}),T)((function(e){var t=e.allRecipies,a=e.auth,n=e.fetchAllRecipe,l=(e.match,e.history),o=e.deleteOneRecipe,i=Object(r.useState)(""),s=Object(N.a)(i,2),u=s[0],p=s[1],m=Object(r.useState)([]),d=Object(N.a)(m,2),f=d[0],h=d[1];return console.log(t,"dlcdlwmflwdfm"),Object(r.useEffect)((function(){n()}),[]),Object(r.useEffect)((function(){var e,n=null===(e=t.recipes)||void 0===e?void 0:e.filter((function(e){return e.ingredients.some((function(e){return e.includes(u.toLowerCase().trim())}))})).map((function(e){return c.a.createElement("div",{className:"col s12 l4"},c.a.createElement(F,{_id:e._id,owner:e._owner.googleId,auth:a.googleId,clicked:function(){return t=e._id,void o(t);var t},selected:function(){return t=e._id,console.log("suca"),void l.push("/"+t);var t},listOfStages:e.listOfStages,listOfIngredients:e.ingredients,name:e.name,image:e.image,difficulty:e.difficulty}))}));h([n]),console.log("coucouuouououo",n)}),[u,t]),c.a.createElement("div",null,c.a.createElement("input",{type:"text",placeholder:"search",value:u,onChange:function(e){console.log("search bar",e.target.value),p(e.target.value)}}),c.a.createElement("div",{className:"row"},f))})),M=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"displayContent",value:function(){switch(this.props.auth){case null:return"still deciding";case!1:return c.a.createElement("ul",{className:"right"},c.a.createElement("li",null,c.a.createElement("a",{href:"/auth/google"},"Login Google")));default:return"/"==this.props.history.location.pathname?c.a.createElement("ul",{className:"right"},c.a.createElement("li",null,c.a.createElement(h.c,{to:"/form/new"},c.a.createElement("button",{className:"btn-floating btn-large waves-effect waves-light green"},c.a.createElement("i",{className:"material-icons"},"add")))),c.a.createElement("li",null,c.a.createElement("a",{style:{borderRadius:"100%"}},this.props.auth.numberOfRecipes," recipies")),c.a.createElement("li",null," ",c.a.createElement("a",{href:"/api/logout"},this.props.auth.name))):c.a.createElement("ul",{className:"right"},c.a.createElement("li",null,c.a.createElement(h.c,{to:"/"},c.a.createElement("button",{className:"btn-floating btn-large waves-effect waves-light blue"},c.a.createElement("i",{className:"material-icons"},"home")))),c.a.createElement("li",null,c.a.createElement("a",{style:{borderRadius:"100%"}},this.props.auth.numberOfRecipes," recipies")),c.a.createElement("li",null," ",c.a.createElement("a",{href:"/api/logout"},this.props.auth.name)))}}},{key:"render",value:function(){return console.log("helooooo",this.props),c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement(h.c,{className:"left brand-logo",to:"/"},"RECIPIOS"),this.displayContent()))}}]),a}(r.Component);var U=Object(i.b)((function(e){return{auth:e.auth}}))(Object(b.g)(M));var q={fetchTheRecipe:C},A=Object(i.b)((function(e){return{allRecipies:e.allRecipies}}),q)((function(e){var t,a,n,l,o,i=e.match,s=e.fetchTheRecipe,u=e.allRecipies;console.log(u.recipes);var p=Object(b.f)(),m=null===(t=u.recipes[0])||void 0===t?void 0:t.ingredients.map((function(e){return c.a.createElement("div",null,e)})),d=null===(a=u.recipes[0])||void 0===a?void 0:a.listOfStages.map((function(e){return c.a.createElement("div",null,e)}));return console.log("aleeee",i),Object(r.useEffect)((function(){s(i.params.id)}),[i.params.id]),console.log("cuckoooo",u),c.a.createElement("div",null,c.a.createElement("h5",null,"How to prepare a ",c.a.createElement("b",null,null===(n=u.recipes[0])||void 0===n?void 0:n.name)," ,the difficulty is ",c.a.createElement("b",null,null===(l=u.recipes[0])||void 0===l?void 0:l.difficulty)," "),c.a.createElement("p",null,m),c.a.createElement("p",null,"the time estimated to prepare the plate is :",null===(o=u.recipes[0])||void 0===o?void 0:o.time," minutes"),c.a.createElement("p",null,d),c.a.createElement("button",{type:"button",onClick:function(){p.push("/")}},"go back !"))})),D=a(41),P=a.n(D),L=a(259),z=a(258),J=[{label:"easy",value:"easy"},{label:"medium",value:"medium"},{label:"hard",value:"hard"}],H=function(e){var t=e.input,a=e.label,n=e.name,r=e.type,l=e.meta,o=l.touched,i=l.error,s=l.asyncValidating;return console.log("heres input",t,n),c.a.createElement("div",null,c.a.createElement("div",{className:s?"async-validating":""},c.a.createElement("label",null,a),"stages separeted by a period"===a?c.a.createElement("textarea",Object.assign({},t,{type:r,style:{marginTop:"20px",height:"100px",marginBottom:"35px"}})):c.a.createElement("input",Object.assign({},t,{type:r,style:{marginBottom:"35px"}})),c.a.createElement("div",null,o&&i)))},V=[{label:"Recipe Title",name:"name",errorMess:"you must set a title",type:"text"},{label:"ingredients separeted by a comma",name:"ingredients",errorMess:"you must choose some ingredients",type:"text"},{label:"stages separeted by a period",name:"listOfStages",errorMess:"you must write the stages",type:"text"},{label:"time of preparation",name:"time",errorMess:"you must add a baking time",type:"number"}],W=a(118),X=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(e,t){e.preventDefault();var a=e.target.files[0];t.onChange(a)},e.renderImageInput=function(t){var a=t.name,n=t.input,r=t.label,l=t.type;return c.a.createElement("div",null,c.a.createElement("label",null,r),c.a.createElement("input",{style:{marginBottom:"30px",marginTop:"25px"},name:a,type:l,onChange:function(t){return e.handleChange(t,n)}}))},e.renderSelectInput=function(e){var t=e.name,a=(e.select,e.label),n=e.input,r=(e.type,e.options);return c.a.createElement("div",null,c.a.createElement("label",null,a),c.a.createElement(W.a,Object.assign({},n,{onChange:function(e){return n.onChange(e)},onBlur:function(){return n.onBlur(n.value)},name:t,options:r})))},e}return Object(m.a)(a,[{key:"renderFields",value:function(){return P.a.map(V,(function(e){var t=e.label,a=e.name,n=e.type;return console.log("huiuiuiiu",n),c.a.createElement(L.a,{key:a,label:t,name:a,type:n,component:H})}))}},{key:"render",value:function(){var e=this.props.handleSubmit;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:e(this.props.onRecipeSubmit)},this.renderFields(),c.a.createElement(L.a,{name:"difficulty",component:this.renderSelectInput,type:"select",options:J}),c.a.createElement(L.a,{name:"picture",component:this.renderImageInput,type:"file"}),c.a.createElement(h.b,{to:"/",className:"red btn-flat white-text"},"Cancel"),c.a.createElement("button",{type:"submit",className:"teal btn-flat right white-text"},"Next",c.a.createElement("i",{className:"material-icons right"},"done"))))}}]),a}(r.Component);var G=Object(z.a)({validate:function(e){var t={};return P.a.each(V,(function(a){var n=a.name,r=a.errorMess;e[n]||(t[n]=r)})),t},asyncBlurFields:["name"],form:"recipeForm",intialValues:{difficulties:{label:"hard",value:"hard"}},enableReinitialize:!0,destroyOnUnmount:!1})(X);var Y=Object(i.b)((function(e){return console.log(e),{form:e.form.recipeForm.values,error:e.error}}),n)(Object(b.g)((function(e){var t=e.onCancel,a=(e.showForm,e.form),n=(e.error,e.submitRecipe),r=e.history;console.log("here 's my form",a);var l=P.a.map(V,(function(e){var t=e.name,n=e.label;return c.a.createElement("div",{key:t},c.a.createElement("label",null,n),c.a.createElement("div",null,a[t]))}));return c.a.createElement("div",null,c.a.createElement("h5",null,"Please confirm your entries"),l,a.picture?c.a.createElement("div",null,a.picture.name):c.a.createElement("div",null," no picture saved yet"),c.a.createElement("button",{className:"yellow darken-3 btn-flat",onClick:t},"Back"),c.a.createElement("button",{onClick:function(){return n(a,r)},className:"green btn-flat right"},"NEW RECIPE ",c.a.createElement("i",{className:"material-icons right"},"email")))}))),K=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showForm:!1},e}return Object(m.a)(a,[{key:"renderContent",value:function(){var e=this;return this.state.showForm?c.a.createElement(Y,Object.assign({},this.state,{onCancel:function(){return e.setState({showForm:!1})}})):c.a.createElement(G,{onRecipeSubmit:function(){return e.setState({showForm:!0})}})}},{key:"render",value:function(){return c.a.createElement("div",null,this.renderContent())}}]),a}(r.Component),Q=Object(z.a)({form:"recipeForm"})(K),Z=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){return console.log("my props",this.props),c.a.createElement("div",{className:"container"},c.a.createElement(h.a,null,c.a.createElement("div",null,c.a.createElement(U,null),c.a.createElement(b.c,null,c.a.createElement(b.a,{exact:!0,path:"/",component:B}),c.a.createElement(b.a,{exact:!0,path:"/form/new",component:Q}),c.a.createElement(b.a,{path:"/:id",component:A})))))}}]),a}(r.Component),$=Object(i.b)(null,n)(Z),ee=a(31),te={recipes:[]},ae=a(260),ne=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user":return t.payload||!1;default:return e}},form:ae.a,error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"registration_error":return e.concat([t.payload]);default:return e}},allRecipies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_all_recipes":return Object(ee.a)(Object(ee.a)({},e),{},{recipes:Object(v.a)(t.payload)||!1});case"delete_recipe":return Object(ee.a)(Object(ee.a)({},e),{},{recipes:e.recipes.filter((function(e){return e._id!==t.payload}))});case"fetch_one_recipe":return Object(ee.a)(Object(ee.a)({},e),{},{recipes:e.recipes.filter((function(e){return e._id===t.payload}))});default:return e}}}),re=Object(s.d)(ne,{},Object(s.a)(u.a));o.a.render(c.a.createElement(i.a,{store:re},c.a.createElement($,null)),document.querySelector("#root"))},59:function(e,t){e.exports={USER:"dq0yhbypi",SECRET:837168773385624,CLOUDINARY_URI:"http://api.cloudinary.com/v1_1/dq0yhbypi/image/upload",PRESET:"images_recipe"}}},[[119,1,2]]]);
//# sourceMappingURL=main.84e2b9ab.chunk.js.map